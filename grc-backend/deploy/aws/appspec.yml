version: 0.0
Resources:
  - TargetService:
      Type: AWS::EC2::Instance
      Properties:
        Tags:
          - Key: Name
            Value: GRCPlatformBackend
          - Key: Environment
            Value: production

os: linux
files:
  source: /
  destination: /opt/grc-platform

Hooks:
  ApplicationStart:
    - location: deploy/aws/scripts/start.sh
      timeout: 300
      runas: root
  ApplicationStop:
    - location: deploy/aws/scripts/stop.sh
      timeout: 300
      runas: root
  BeforeInstall:
    - location: deploy/aws/scripts/before-install.sh
      timeout: 300
      runas: root
  AfterInstall:
    - location: deploy/aws/scripts/after-install.sh
      timeout: 600
      runas: root
  ValidateService:
    - location: deploy/aws/scripts/validate.sh
      timeout: 300
      runas: root
